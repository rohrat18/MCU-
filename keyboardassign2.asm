org 000h

mov p3,#0ffh
data1:mov p2,#00h
mov a,p3
anl a,#01111111b
cjne a,#7fh,data1
//acall delay
data2:mov p2,#00h
mov a,p3
anl a,#01111111b
cjne a,#7fh,start
sjmp data2
//acall delay
start:mov p2,#11111110b
mov a,p3
anl a,#01111111b
cjne a,#7fh,row_0
mov p2,#11111101b
mov a,p3
anl a,#01111111b
cjne a,#7fh,row_1
mov p2,#11111011b
mov a,p3
anl a,#01111111b
cjne a,#7fh,row_2
mov p2,#11110111b
mov a,p3
anl a,#01111111b
cjne a,#7fh,row_3
mov p2,#11101111b
mov a,p3
anl a,#01111111b
cjne a,#7fh,row_4
mov p2,#11011111b
mov a,p3
anl a,#01111111b
cjne a,#7fh,row_5
mov p2,#10111111b
mov a,p3
anl a,#01111111b
cjne a,#7fh,row_6
row_0:mov dptr,#code0
sjmp find
row_1:mov dptr,#code1
sjmp find
row_2:mov dptr,#code2
sjmp find
row_3:mov dptr,#code3
sjmp find
row_4:mov dptr,#code4
sjmp find
row_5:mov dptr,#code5
sjmp find
row_6:mov dptr,#code6
sjmp find
find:mov r0,#07h
rrc a
jnc found
inc dptr
djnz r0,find
ljmp data1
found:
MOV A,#38H
ACALL CW
ACALL DELAY 
MOV A,#0EH
ACALL CW
ACALL DELAY 
MOV A,#01H
ACALL CW
ACALL DELAY 
MOV A,#06H
ACALL CW
ACALL DELAY 
MOV A,#86H
ACALL DELAY
ACALL CW 
clr a
movc a,@a+dptr
acall display
ljmp last
delay:mov r7,#10h
delay1:djnz r7,delay1
ret
CW:mov p0,a
clr p1.0
clr p1.1
setb p1.2
clr p1.2
ret
display:mov p0,a
setb p1.0
clr p1.1
setb p1.2
clr p1.2
ret
org 300h
code0:db 'a','b','c','d','e','f','g'
code1:db 'h','i','j','k','l','m','n'
code2:db 'o','p','q','r','s','t','u'
code3:db 'v','w','x','y','z','0',1h
code4:db 2h,3h,4h,5h,6h,7h,8h
code5:db 9h,'@','#','$','%','^','&'
code6:db 'r'
last:
end